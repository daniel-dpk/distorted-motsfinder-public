<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MOTS Finder: motsfinder.axisym.trackmots.tracker Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxystyle_tweaks.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MOTS Finder
   &#160;<span id="projectnumber">v1.5</span>
   </div>
   <div id="projectbrief">Find non-star-shaped MOTSs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('namespacemotsfinder_1_1axisym_1_1trackmots_1_1tracker.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">motsfinder.axisym.trackmots.tracker Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Track a single MOTS through slices of a simulation.  
<a href="namespacemotsfinder_1_1axisym_1_1trackmots_1_1tracker.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmotsfinder_1_1axisym_1_1trackmots_1_1tracker_1_1MOTSTracker.html">MOTSTracker</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for coordinating tracking a MOTS through slices.  <a href="classmotsfinder_1_1axisym_1_1trackmots_1_1tracker_1_1MOTSTracker.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmotsfinder_1_1axisym_1_1trackmots_1_1tracker_1_1__NeckInfo.html">_NeckInfo</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collection of data about the <em>neck</em> of an inner common MOTS.  <a href="classmotsfinder_1_1axisym_1_1trackmots_1_1tracker_1_1__NeckInfo.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad06d51ef28c325b6b8f5a9f512166426"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemotsfinder_1_1axisym_1_1trackmots_1_1tracker.html#ad06d51ef28c325b6b8f5a9f512166426">track_mots</a> (hname, sim_dir, out_base_dir, folder, initial_guess, MOTS_map=None, **kw)</td></tr>
<tr class="memdesc:ad06d51ef28c325b6b8f5a9f512166426"><td class="mdescLeft">&#160;</td><td class="mdescRight">Track one MOTS through slices of simulation data.  <a href="namespacemotsfinder_1_1axisym_1_1trackmots_1_1tracker.html#ad06d51ef28c325b6b8f5a9f512166426">More...</a><br /></td></tr>
<tr class="separator:ad06d51ef28c325b6b8f5a9f512166426"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Track a single MOTS through slices of a simulation. </p>
<p><b>Examples</b> </p>
<div class="fragment"><div class="line"><span class="comment"># Example of a run finding the AH in a sequence of slices.</span></div>
<div class="line">track_mots(</div>
<div class="line">    hname=<span class="stringliteral">&#39;AH&#39;</span>,</div>
<div class="line">    sim_dir=<span class="stringliteral">&#39;data/simulation/brill-lindquist-res256&#39;</span>,</div>
<div class="line">    out_base_dir=<span class="stringliteral">&#39;results&#39;</span>,</div>
<div class="line">    folder=<span class="stringliteral">&#39;BL-res256/run1/AH&#39;</span>,</div>
<div class="line">    initial_guess=<span class="stringliteral">&#39;results/BL-res256/init/AH_discrete1_it0000000000.npy&#39;</span>,</div>
<div class="line">    compute=<span class="keyword">True</span>,</div>
<div class="line">    two_pass=<span class="keyword">False</span>,</div>
<div class="line">    props=[],</div>
<div class="line">    strategy=2,</div>
<div class="line">    verbosity=2,</div>
<div class="line">    timings=<span class="keyword">True</span>,</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Example of a run for computing the properties in parallel.</span></div>
<div class="line">track_mots(</div>
<div class="line">    hname=<span class="stringliteral">&#39;AH&#39;</span>,</div>
<div class="line">    sim_dir=<span class="stringliteral">&#39;data/simulation/brill-lindquist-res256&#39;</span>,</div>
<div class="line">    out_base_dir=<span class="stringliteral">&#39;results&#39;</span>,</div>
<div class="line">    folder=<span class="stringliteral">&#39;BL-res256/run1/AH&#39;</span>,</div>
<div class="line">    initial_guess=<span class="keywordtype">None</span>,  <span class="comment"># not needed for a property run</span></div>
<div class="line">    compute=<span class="keyword">False</span>,</div>
<div class="line">    two_pass=<span class="keyword">False</span>,</div>
<div class="line">    props=[<span class="stringliteral">&#39;all&#39;</span>],</div>
<div class="line">    strategy=2,</div>
<div class="line">    verbosity=2,</div>
<div class="line">    timings=<span class="keyword">True</span>,</div>
<div class="line">    retry_after=180,  <span class="comment"># wait 3 minutes for new results and try again</span></div>
<div class="line">)</div>
</div><!-- fragment --><p>These examples assume the initial guess for the MOTS has been found e.g. using .<a class="el" href="classmotsfinder_1_1axisym_1_1initialguess_1_1InitHelper.html" title="Helper to find the initial MOTSs for a Brill-Lindquist-like metric.">initialguess.InitHelper</a> and that the apparent horizon already exists in the first slice.</p>
<p>In case the initial guess for the AH is successful in, say, slice 2048, then we need to run two sets of the above trackers, one going forward in slices and one going backwards. This would be accomplished by adding the following arguments:</p>
<div class="fragment"><div class="line">initial_guess=<span class="stringliteral">&#39;results/BL-res256/init/AH_discrete1_it0000002048.npy&#39;</span>,</div>
<div class="line">start_slice=2048,</div>
<div class="line">backwards=<span class="keyword">False</span>,</div>
</div><!-- fragment --><p>And for the backwards direction:</p>
<div class="fragment"><div class="line">initial_guess=<span class="stringliteral">&#39;results/BL-res256/init/AH_discrete1_it0000002048.npy&#39;</span>,</div>
<div class="line">start_slice=2048,</div>
<div class="line">backwards=<span class="keyword">True</span>,</div>
</div><!-- fragment --> </div><h2 class="groupheader">Function Documentation</h2>
<a id="ad06d51ef28c325b6b8f5a9f512166426"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad06d51ef28c325b6b8f5a9f512166426">&#9670;&nbsp;</a></span>track_mots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def motsfinder.axisym.trackmots.tracker.track_mots </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>hname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sim_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>out_base_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>folder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>initial_guess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>MOTS_map</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**&#160;</td>
          <td class="paramname"><em>kw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Track one MOTS through slices of simulation data. </p>
<p>See the package documentation for ..<a class="el" href="namespacemotsfinder_1_1axisym_1_1trackmots.html" title="Helpers to track a MOTS through simulation slices.">axisym.trackmots</a> for examples of invoking the tracker.</p>
<p>The tracker basically has two "modes" to run in:</p><ol type="1">
<li>Find mode: Try to locate MOTSs in each slice</li>
<li>Property mode: Compute area, stability, etc., of previously found MOTSs</li>
</ol>
<p>The idea is that the two modes can potentially be run in parallel: You start with a finding run. After the first few MOTSs have been found and stored in the output folder, a property runner can be invoked to compute physical properties parallel to the finding run. If desired, the property runner can be instructed to wait for results of the finder in case it catches up.</p>
<p>Computed properties are stored as <code>user_data</code> of the curve object. After computing the properties, the file from where the curve was loaded is overwritten with the new curve containing the computed data. Note that this introduces an issue happening if two <em>property runners</em> compute (potentially different) properties of the same curve in parallel, since the one finishing last will effectively erase the results computed by the others. This means you should let only one property runner work on a curve at a time. No check is done to enforce this.</p>
<p>For some tasks, the finder or property runner needs to consider sibling MOTSs (e.g. to compute distances between MOTSs). Sibling MOTSs are located using the following assumptions:</p><ul>
<li>Each MOTS has their own output folder</li>
<li>Each of these folders belong to a "run", i.e. a common parent folder</li>
</ul>
<p>This should be accomplished by setting <code>folder</code> appropriately, e.g.: </p><pre class="fragment">folder="foo/run1/AH"
</pre><p> An example file structure (with <code>out_base_dir="some/path"</code>) might be: </p><pre class="fragment">some/path/foo/run1/AH/AH_discrete_it0000000000.npy
some/path/foo/run1/AH/AH_discrete_it0000000001.npy
some/path/foo/run1/top/top_discrete_it0000000000.npy
some/path/foo/run1/top/top_discrete_it0000000001.npy
some/path/foo/run1/bot/bot_discrete_it0000000000.npy
some/path/foo/run1/bot/bot_discrete_it0000000001.npy
some/path/foo/run1/inner/inner_discrete_it0000000000.npy
some/path/foo/run2/inner/inner_discrete_it0000000000.npy
some/path/foo/run2/inner/inner_discrete_it0000000001.npy
</pre><p> Here, the apparent horizon, the top, and bottom MOTSs were found in slices 0 and 1. The inner common MOTS was only found in slice 0. Upon changing settings, we managed to find it in slice 0 and 1 and stored the results under <code>run2</code>.</p>
<p>To make the tracker aware of the <code>top</code> and <code>bot</code> MOTSs from <code>run1</code> when computing properties of <code>run2/inner</code>, you supply a mapping from MOTS name (e.g. <code>top</code>, <code>bot</code>) to the run to take it from (e.g. <code>run1</code>). This is done using the <code>MOTS_map</code> parameter like so: </p><pre class="fragment">MOTS_map=dict(top="run1", bot="run1")
</pre><p> A missing entry in the <code>MOTS_map</code> means we should take the MOTS from the current run.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hname</td><td>Name of the horizon to track. This determines the file names as well as which properties are computed. For example, the distance between top and bottom MOTS is computed only if this MOTS has <code>hname="bot"</code> and a sibling MOTS for the same slice named <code>hname="top"</code> has already been found and stored. Similarly, the <em>neck</em> location and properties as well as the distance to the <code>"top"</code> and <code>"bot"</code> MOTSs is computed only for a run with <code>hname="inner"</code>. Examples: <code>"AH"</code>, <code>"top"</code>, <code>"bot"</code>, <code>"inner"</code>. </td></tr>
    <tr><td class="paramname">sim_dir</td><td>Folder to find the simulation slices in. Slices from all subfolders are found and sorted alphanumerically. Slices with the same base name (i.e. ignoring differently named parent folders) as one already in the list are skipped. Example: <code>"data/simulation/brill-lindquist-2-res256"</code>. </td></tr>
    <tr><td class="paramname">out_base_dir</td><td>Parent folder for all the results. Example: <code>"./results"</code>. </td></tr>
    <tr><td class="paramname">folder</td><td>Sub folder of the <code>out_base_dir</code> containing results for this specific configuration and run. Example: <code>"BL-2-res256/run1/AH"</code>. If configured as in the examples and the MOTS configuration is set to use a <code>simple_name</code> (see the documentation of .<a class="el" href="classmotsfinder_1_1axisym_1_1findmots_1_1MotsFindingConfig.html#a5b50c5f12c0cd978218665a9b05e938f" title="Initialize a new configuration object.">findmots.MotsFindingConfig.__init__()</a>), then the curves will be stored in <code>./results/BL-2-res256/run1/AH</code>. </td></tr>
    <tr><td class="paramname">initial_guess</td><td>Curve or filename or float to use as initial guess for tracking this MOTS. Differentiation between the different MOTSs to track through slices happens by using different initial guesses. You may use the .<a class="el" href="classmotsfinder_1_1axisym_1_1initialguess_1_1InitHelper.html" title="Helper to find the initial MOTSs for a Brill-Lindquist-like metric.">initialguess.InitHelper</a> to help obtaining initial guesses for different MOTSs in a particular slice. </td></tr>
    <tr><td class="paramname">MOTS_map</td><td>Optional map (<code>dict</code>) specifying from which run the auxiliary MOTSs required for certain tasks should be taken. See above for examples. </td></tr>
    <tr><td class="paramname">**kw</td><td>Additional keyword arguments configure the settings of the <a class="el" href="classmotsfinder_1_1axisym_1_1trackmots_1_1tracker_1_1MOTSTracker.html" title="Class for coordinating tracking a MOTS through slices.">MOTSTracker</a> (see its documented public attributes). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemotsfinder.html">motsfinder</a></li><li class="navelem"><a class="el" href="namespacemotsfinder_1_1axisym.html">axisym</a></li><li class="navelem"><a class="el" href="namespacemotsfinder_1_1axisym_1_1trackmots.html">trackmots</a></li><li class="navelem"><a class="el" href="namespacemotsfinder_1_1axisym_1_1trackmots_1_1tracker.html">tracker</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
